import{_ as s,c as t,o as e,a2 as a}from"./chunks/framework.DRvQ3jNO.js";const g=JSON.parse('{"title":"GitHub App Setup","description":"","frontmatter":{},"headers":[],"relativePath":"deployment/github-app.md","filePath":"deployment/github-app.md"}'),o={name:"deployment/github-app.md"};function n(l,i,r,p,h,u){return e(),t("div",null,[...i[0]||(i[0]=[a(`<h1 id="github-app-setup" tabindex="-1">GitHub App Setup <a class="header-anchor" href="#github-app-setup" aria-label="Permalink to &quot;GitHub App Setup&quot;">​</a></h1><p>Configure GitHub App integration for automatic deployments from GitHub repositories.</p><h2 id="overview" tabindex="-1">Overview <a class="header-anchor" href="#overview" aria-label="Permalink to &quot;Overview&quot;">​</a></h2><p>Mist uses <strong>GitHub App integration</strong> (not OAuth Apps or Personal Access Tokens) to:</p><ul><li>Access your repositories</li><li>Receive webhook notifications for code pushes</li><li>Trigger automatic deployments when you push code</li><li>Clone private repositories securely</li></ul><h2 id="automatic-github-app-creation" tabindex="-1">Automatic GitHub App Creation <a class="header-anchor" href="#automatic-github-app-creation" aria-label="Permalink to &quot;Automatic GitHub App Creation&quot;">​</a></h2><p>Mist provides a streamlined process to create a GitHub App directly from the dashboard.</p><h3 id="step-1-access-github-app-setup" tabindex="-1">Step 1: Access GitHub App Setup <a class="header-anchor" href="#step-1-access-github-app-setup" aria-label="Permalink to &quot;Step 1: Access GitHub App Setup&quot;">​</a></h3><ol><li>Log in to Mist as <strong>Owner</strong> (only Owners can create GitHub Apps)</li><li>Navigate to <strong>Settings → Integrations → GitHub</strong></li><li>Click <strong>&quot;Create GitHub App&quot;</strong> or <strong>&quot;Connect GitHub&quot;</strong></li></ol><h3 id="step-2-create-github-app" tabindex="-1">Step 2: Create GitHub App <a class="header-anchor" href="#step-2-create-github-app" aria-label="Permalink to &quot;Step 2: Create GitHub App&quot;">​</a></h3><ol><li>Log in to Mist as <strong>Owner</strong> (only Owners can create GitHub Apps)</li><li>Navigate to <strong>Settings → Integrations → GitHub</strong></li><li>Click <strong>&quot;Create GitHub App&quot;</strong> or <strong>&quot;Connect GitHub&quot;</strong></li></ol><h3 id="step-3-automatic-github-app-creation" tabindex="-1">Step 3: Automatic GitHub App Creation <a class="header-anchor" href="#step-3-automatic-github-app-creation" aria-label="Permalink to &quot;Step 3: Automatic GitHub App Creation&quot;">​</a></h3><p>When you click &quot;Create GitHub App&quot; in Mist:</p><ol><li><p><strong>Mist generates a manifest</strong> with:</p><ul><li>App name: <code>Mist-{random-5-digit-number}</code> (e.g., <code>Mist-12345</code>)</li><li>Webhook URL: Auto-configured based on your Mist installation</li><li>Callback URLs for OAuth</li><li>Required permissions (contents, metadata, webhooks)</li><li>Event subscriptions (push, pull_request, deployment_status)</li></ul></li><li><p><strong>You&#39;re redirected to GitHub</strong> with pre-filled configuration</p></li><li><p><strong>GitHub creates the app</strong> and redirects back to Mist</p></li><li><p><strong>Mist stores credentials</strong> in the database:</p><ul><li>App ID</li><li>Client ID</li><li>Client Secret</li><li>Private Key (RSA)</li><li>Webhook Secret</li></ul></li></ol><div class="tip custom-block"><p class="custom-block-title">Fully Automated</p><p>You don&#39;t need to manually configure permissions, generate keys, or copy credentials. Mist handles everything automatically.</p></div><h2 id="github-app-permissions" tabindex="-1">GitHub App Permissions <a class="header-anchor" href="#github-app-permissions" aria-label="Permalink to &quot;GitHub App Permissions&quot;">​</a></h2><p>The automatically created GitHub App requests these permissions:</p><p><strong>Repository Permissions:</strong></p><ul><li><strong>Contents</strong>: Read - Access repository files and commits</li><li><strong>Metadata</strong>: Read - Basic repository information</li><li><strong>Pull Requests</strong>: Read - View pull requests</li><li><strong>Deployments</strong>: Read - Deployment status</li><li><strong>Administration</strong>: Write - Manage repository settings</li><li><strong>Webhooks</strong>: Write - Create and manage webhooks</li></ul><p><strong>Subscribed Events:</strong></p><ul><li><strong>Push</strong> - Triggered when code is pushed to repository</li><li><strong>Pull Request</strong> - Triggered on PR events</li><li><strong>Deployment Status</strong> - Triggered on deployment updates</li></ul><p><strong>Webhook Security:</strong></p><ul><li>Webhook signatures are validated using HMAC-SHA256</li><li>Only requests with valid signatures are processed</li><li>Webhook secret is automatically generated during app creation</li></ul><h2 id="install-github-app-on-repositories" tabindex="-1">Install GitHub App on Repositories <a class="header-anchor" href="#install-github-app-on-repositories" aria-label="Permalink to &quot;Install GitHub App on Repositories&quot;">​</a></h2><p>After creating the GitHub App, you need to install it on the repositories you want to deploy:</p><h3 id="install-on-your-account-organization" tabindex="-1">Install on Your Account/Organization <a class="header-anchor" href="#install-on-your-account-organization" aria-label="Permalink to &quot;Install on Your Account/Organization&quot;">​</a></h3><ol><li><p><strong>From Mist Dashboard</strong>:</p><ul><li>After successful app creation, you&#39;re redirected to installation page</li><li>Or go to GitHub → Settings → Applications → Your Mist App → Install</li></ul></li><li><p><strong>Select Installation Target</strong>:</p><ul><li>Personal account</li><li>Or organization (if you have access)</li></ul></li><li><p><strong>Choose Repository Access</strong>:</p><ul><li><strong>All repositories</strong>: Mist can access all current and future repos</li><li><strong>Only select repositories</strong>: Choose specific repos to grant access</li></ul></li><li><p><strong>Complete Installation</strong>:</p><ul><li>Click <strong>&quot;Install&quot;</strong></li><li>You&#39;ll be redirected back to Mist</li></ul></li></ol><h3 id="verify-installation" tabindex="-1">Verify Installation <a class="header-anchor" href="#verify-installation" aria-label="Permalink to &quot;Verify Installation&quot;">​</a></h3><p>In Mist dashboard:</p><ol><li><strong>Create a new application</strong> or edit existing</li><li>Go to <strong>Git Configuration</strong> section</li><li><strong>Repository dropdown</strong> should show your installed repositories</li><li>Select repository and branch</li><li>Configure Dockerfile path</li><li>Deploy!</li></ol><div class="tip custom-block"><p class="custom-block-title">Multiple Organizations</p><p>If you have multiple GitHub organizations, you can install the same GitHub App on each organization separately. Each installation is independent.</p></div><h2 id="configure-webhook-url-for-production" tabindex="-1">Configure Webhook URL for Production <a class="header-anchor" href="#configure-webhook-url-for-production" aria-label="Permalink to &quot;Configure Webhook URL for Production&quot;">​</a></h2><p>If you need to update the GitHub App webhook URL after initial creation:</p><ol><li>Go to <a href="https://github.com/settings/apps" target="_blank" rel="noreferrer">GitHub Apps Settings</a></li><li>Select your Mist app</li><li>Update <strong>Webhook URL</strong> to: <code>https://mist.yourdomain.com/api/github/webhook</code></li><li>Update <strong>Callback URL</strong> to: <code>https://mist.yourdomain.com/api/github/callback</code></li><li>Update <strong>Setup URL</strong> to: <code>https://mist.yourdomain.com/api/github/installation/callback</code></li><li>Click <strong>&quot;Save changes&quot;</strong></li></ol><h2 id="automatic-deployments" tabindex="-1">Automatic Deployments <a class="header-anchor" href="#automatic-deployments" aria-label="Permalink to &quot;Automatic Deployments&quot;">​</a></h2><p>Once configured, Mist automatically deploys when you push code:</p><h3 id="how-it-works" tabindex="-1">How it Works <a class="header-anchor" href="#how-it-works" aria-label="Permalink to &quot;How it Works&quot;">​</a></h3><ol><li><strong>You push code</strong> to a branch configured in Mist</li><li><strong>GitHub sends webhook</strong> to Mist</li><li><strong>Mist receives push event</strong> and starts deployment</li><li><strong>Clones repository</strong> using GitHub App authentication</li><li><strong>Builds Docker image</strong> from Dockerfile</li><li><strong>Deploys container</strong> with configured settings</li><li><strong>Updates deployment status</strong> in Mist dashboard</li></ol><h3 id="monitor-webhook-deliveries" tabindex="-1">Monitor Webhook Deliveries <a class="header-anchor" href="#monitor-webhook-deliveries" aria-label="Permalink to &quot;Monitor Webhook Deliveries&quot;">​</a></h3><p>Check if webhooks are being delivered successfully:</p><ol><li>Go to <a href="https://github.com/settings/apps" target="_blank" rel="noreferrer">GitHub Apps Settings</a></li><li>Select your Mist app</li><li>Click <strong>&quot;Advanced&quot; tab</strong></li><li>View <strong>Recent Deliveries</strong></li></ol><p>Look for:</p><ul><li>✅ <strong>200 OK</strong>: Webhook received successfully</li><li>❌ <strong>Failed</strong>: Check error details and Mist logs</li></ul><h2 id="test-webhook-integration" tabindex="-1">Test Webhook Integration <a class="header-anchor" href="#test-webhook-integration" aria-label="Permalink to &quot;Test Webhook Integration&quot;">​</a></h2><p>Verify that automatic deployments work correctly:</p><h3 id="method-1-push-to-repository" tabindex="-1">Method 1: Push to Repository <a class="header-anchor" href="#method-1-push-to-repository" aria-label="Permalink to &quot;Method 1: Push to Repository&quot;">​</a></h3><ol><li><strong>Configure application</strong> in Mist with GitHub repository</li><li><strong>Make a change</strong> to your code</li><li><strong>Commit and push</strong>:<div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Test deployment&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> origin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main</span></span></code></pre></div></li><li><strong>Check Mist dashboard</strong>: <ul><li>Navigate to application → Deployments</li><li>You should see a new deployment starting automatically</li><li>Monitor build logs in real-time</li></ul></li></ol><h3 id="method-2-redeliver-webhook" tabindex="-1">Method 2: Redeliver Webhook <a class="header-anchor" href="#method-2-redeliver-webhook" aria-label="Permalink to &quot;Method 2: Redeliver Webhook&quot;">​</a></h3><p>Test without pushing new code:</p><ol><li>Go to <a href="https://github.com/settings/apps" target="_blank" rel="noreferrer">GitHub Apps Settings</a></li><li>Click your Mist app → <strong>Advanced</strong> tab</li><li>Find a recent <strong>push</strong> event in Recent Deliveries</li><li>Click <strong>&quot;Redeliver&quot;</strong></li><li>Check Mist dashboard for new deployment</li></ol><h3 id="method-3-check-mist-logs" tabindex="-1">Method 3: Check Mist Logs <a class="header-anchor" href="#method-3-check-mist-logs" aria-label="Permalink to &quot;Method 3: Check Mist Logs&quot;">​</a></h3><p>Monitor webhook reception in real-time:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Watch for incoming webhooks</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> journalctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mist</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;webhook\\|github&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Check recent webhook activity</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> journalctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mist</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> webhook</span></span></code></pre></div><p>Look for log messages like:</p><ul><li><code>Received GitHub webhook</code></li><li><code>Processing push event for repository: owner/repo</code></li><li><code>Starting deployment for application: app-name</code></li></ul><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><h3 id="webhooks-not-being-received" tabindex="-1">Webhooks Not Being Received <a class="header-anchor" href="#webhooks-not-being-received" aria-label="Permalink to &quot;Webhooks Not Being Received&quot;">​</a></h3><p><strong>Check webhook deliveries in GitHub:</strong></p><ol><li>GitHub Apps → Your App → Advanced tab</li><li>Look at Recent Deliveries</li><li>If failed: <ul><li>❌ <strong>Connection timeout</strong>: Firewall blocking GitHub IPs</li><li>❌ <strong>Connection refused</strong>: Mist not running or port 8080 not accessible</li><li>❌ <strong>404 Not Found</strong>: Wrong webhook URL</li><li>❌ <strong>500 Internal Server Error</strong>: Check Mist logs for errors</li></ul></li></ol><p><strong>Verify webhook URL is accessible:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Test from external server (or use webhook.site for testing)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -X</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> POST</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://your-mist-domain.com/api/github/webhook</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -H</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Content-Type: application/json&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  -d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;{&quot;test&quot;: true}&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Should return 200 or similar (not 404/timeout)</span></span></code></pre></div><p><strong>Check firewall rules:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Verify port 80/443 are open</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ufw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -E</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;80|443&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># If using Mist API directly (port 8080), verify it&#39;s accessible</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://your-domain:8080/health</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Should work</span></span></code></pre></div><p><strong>Allow GitHub webhook IPs (optional, for security):</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Get GitHub&#39;s current IP ranges</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://api.github.com/meta</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> jq</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;.hooks[]&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Example: Allow GitHub IPs for webhook endpoint</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># (Implement via nginx/firewall rules)</span></span></code></pre></div><h3 id="repositories-not-showing-in-dropdown" tabindex="-1">Repositories Not Showing in Dropdown <a class="header-anchor" href="#repositories-not-showing-in-dropdown" aria-label="Permalink to &quot;Repositories Not Showing in Dropdown&quot;">​</a></h3><p><strong>Verify GitHub App installation:</strong></p><ol><li>Go to GitHub → Settings → Applications → Installed GitHub Apps</li><li>Find your Mist app</li><li>Verify it&#39;s installed on the correct account/organization</li><li>Check repository access (All repositories or Selected ones)</li></ol><p><strong>Reinstall GitHub App:</strong></p><p>If repositories still don&#39;t appear:</p><ol><li>Uninstall the GitHub App from GitHub settings</li><li>Go back to Mist → Settings → Integrations</li><li>Reinstall the app</li><li>Select repositories to grant access</li></ol><p><strong>Check Mist logs:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> journalctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mist</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 100</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;github\\|repository&quot;</span></span></code></pre></div><h3 id="private-key-errors" tabindex="-1">Private Key Errors <a class="header-anchor" href="#private-key-errors" aria-label="Permalink to &quot;Private Key Errors&quot;">​</a></h3><p>If you see errors related to GitHub authentication:</p><p><strong>Verify GitHub App exists in database:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sqlite3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/lib/mist/mist.db</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;SELECT app_id, client_id FROM github_app;&quot;</span></span></code></pre></div><p><strong>Check private key format:</strong></p><p>The private key should be stored as RSA format in the database. If corrupted:</p><ol><li>Delete the GitHub App from Mist settings</li><li>Recreate it using the automatic setup process</li></ol><h3 id="deployment-not-triggering" tabindex="-1">Deployment Not Triggering <a class="header-anchor" href="#deployment-not-triggering" aria-label="Permalink to &quot;Deployment Not Triggering&quot;">​</a></h3><p><strong>Verify branch configuration:</strong></p><ul><li>Make sure you&#39;re pushing to the <strong>branch configured in Mist</strong></li><li>Default is often <code>main</code> but could be <code>master</code>, <code>develop</code>, etc.</li></ul><p><strong>Check deployment logs:</strong></p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># View recent deployments</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> journalctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mist</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;deployment\\|deploy&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Check for errors</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> journalctl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mist</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> err</span></span></code></pre></div><p><strong>Manually trigger deployment:</strong></p><p>From Mist dashboard:</p><ol><li>Go to application details</li><li>Click <strong>&quot;Deploy&quot;</strong> button</li><li>Monitor build logs</li></ol><h3 id="webhook-url-changed" tabindex="-1">Webhook URL Changed <a class="header-anchor" href="#webhook-url-changed" aria-label="Permalink to &quot;Webhook URL Changed&quot;">​</a></h3><p>If you change your Mist domain or IP:</p><ol><li>Update webhook URL in GitHub App settings (see &quot;Configure Webhook URL for Production&quot; above)</li><li>Or delete and recreate the GitHub App through Mist UI</li></ol><h2 id="security-best-practices" tabindex="-1">Security Best Practices <a class="header-anchor" href="#security-best-practices" aria-label="Permalink to &quot;Security Best Practices&quot;">​</a></h2><h3 id="webhook-security" tabindex="-1">Webhook Security <a class="header-anchor" href="#webhook-security" aria-label="Permalink to &quot;Webhook Security&quot;">​</a></h3><p>Mist validates all incoming webhook requests using HMAC-SHA256 signatures. Only authenticated requests from GitHub are processed.</p><p><strong>Additional Security (Optional):</strong></p><p>If you want an extra layer of security, restrict webhook endpoint access to GitHub&#39;s IP ranges:</p><p><strong>Option 1: IP Whitelist (Nginx)</strong></p><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># /etc/nginx/sites-available/mist</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> /api/github/webhook </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # GitHub webhook IP ranges (update periodically from https://api.github.com/meta)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    allow </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">140.82.112.0/20;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    allow </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">143.55.64.0/20;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    allow </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">185.199.108.0/22;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    allow </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">192.30.252.0/22;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    deny </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">all</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">http://localhost:8080;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>Option 2: Firewall Rules</strong></p><p>Use UFW or iptables to allow only GitHub IP ranges for the webhook endpoint.</p><h2 id="advanced-configuration" tabindex="-1">Advanced Configuration <a class="header-anchor" href="#advanced-configuration" aria-label="Permalink to &quot;Advanced Configuration&quot;">​</a></h2><h3 id="multiple-github-apps" tabindex="-1">Multiple GitHub Apps <a class="header-anchor" href="#multiple-github-apps" aria-label="Permalink to &quot;Multiple GitHub Apps&quot;">​</a></h3><p>You can only have <strong>one GitHub App per Mist instance</strong> currently. If you need multiple:</p><ul><li>Use different Mist instances for different organizations</li><li>Or install the same GitHub App on multiple organizations</li></ul><h3 id="github-enterprise-server" tabindex="-1">GitHub Enterprise Server <a class="header-anchor" href="#github-enterprise-server" aria-label="Permalink to &quot;GitHub Enterprise Server&quot;">​</a></h3><p>Mist uses GitHub.com APIs. For GitHub Enterprise Server support:</p><ul><li>Currently not supported</li><li>Coming soon: Configurable GitHub API base URL</li></ul><h2 id="further-reading" tabindex="-1">Further Reading <a class="header-anchor" href="#further-reading" aria-label="Permalink to &quot;Further Reading&quot;">​</a></h2><ul><li><a href="https://docs.github.com/en/apps" target="_blank" rel="noreferrer">GitHub Apps Documentation</a></li><li><a href="https://docs.github.com/en/webhooks" target="_blank" rel="noreferrer">GitHub Webhooks</a></li><li><a href="https://docs.github.com/en/rest/meta" target="_blank" rel="noreferrer">GitHub API Meta Endpoint</a> - Get webhook IP ranges</li></ul>`,109)])])}const c=s(o,[["render",n]]);export{g as __pageData,c as default};
